---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout
  title="The Journal Protocol Stack ‚Äî Journal Foundation"
  description="Explore the three-layer architecture that powers privacy-first applications: Vault, Cypherlot, and apps."
>
  <div class="stack-page">
    <header class="stack-hero">
      <h1>The Journal Protocol Stack</h1>
      <p class="lead">Open protocols for privacy-first applications.</p>
      <p class="intro">Centralized platforms failed to protect people from surveillance, data extraction, and manipulation. We are building shared infrastructure so anyone can run software that respects human agency.</p>
    </header>

    <section class="problem-section">
      <h2>Why platforms keep failing</h2>
      <p>Moving from one walled garden to another changes who holds the keys, not the power dynamics. Social graphs, personal archives, and AI assistants still run on servers you do not control. Federation helps, but without anonymization and verifiable custody it leaves metadata exposed and influence unchecked.</p>
      <p>The Journal Protocol Stack is designed for people who refuse that trade. Three composable layers give developers, researchers, and communities primitives for encrypted storage, capability-based sharing, and swappable applications.</p>
    </section>

    <section class="layers-section">
      <h2>Three Layers</h2>

      <article class="layer-card">
        <div class="layer-icon" aria-hidden="true">üì¶</div>
        <div>
          <h3>Layer 1: Journal Vault</h3>
          <p><strong>What:</strong> Encrypted, graph-aware personal data storage</p>
          <p><strong>Purpose:</strong> Where your data lives</p>
          <ul>
            <li>Encrypted at rest (AES-256-GCM)</li>
            <li>Segmented access control</li>
            <li>Graph-structured for AI/RAG</li>
            <li>Self-hostable</li>
          </ul>
          <p class="layer-link"><a href="/specs">Technical details ‚Üí</a></p>
        </div>
      </article>

      <article class="layer-card">
        <div class="layer-icon" aria-hidden="true">üîí</div>
        <div>
          <h3>Layer 2: Cypherlot</h3>
          <p><strong>What:</strong> Network access layer with capability-based sharing</p>
          <p><strong>Purpose:</strong> How data is shared safely</p>
          <ul>
            <li>Capability tokens (scoped, expiring, revocable)</li>
            <li>Blind relays (OHTTP for metadata protection)</li>
            <li>NAT traversal (no static IP needed)</li>
            <li>Selective exfiltration only</li>
          </ul>
          <p class="layer-link"><a href="/specs/rfc-0001-core">Technical details ‚Üí</a></p>
        </div>
      </article>

      <article class="layer-card">
        <div class="layer-icon" aria-hidden="true">üì±</div>
        <div>
          <h3>Layer 3: Apps (Client Layer)</h3>
          <p><strong>What:</strong> User-facing applications</p>
          <p><strong>Purpose:</strong> How humans interact with their data</p>
          <p class="callout">Apps are swappable‚Äîyour data always stays in your vault.</p>
          <h4>Example apps developers could build:</h4>
          <ul>
            <li>Private messaging</li>
            <li>Photo sharing</li>
            <li>Social networking</li>
            <li>Voice memos</li>
            <li>AI chat with personal history</li>
          </ul>
          <p class="layer-link"><a href="/docs">For developers ‚Üí</a></p>
        </div>
      </article>
    </section>

    <section class="diagram-section">
      <h2>A stack built for anonymization</h2>
      <div class="diagram">
        <div class="diagram-layer">
          <h3>Apps</h3>
          <p>Clients talk to the Cypherlot using scoped capabilities.</p>
        </div>
        <div class="diagram-layer">
          <h3>Cypherlot</h3>
          <p>Enforces permissions, handles relays, and keeps metadata dark.</p>
        </div>
        <div class="diagram-layer">
          <h3>Journal Vault</h3>
          <p>Stores encrypted knowledge graphs and large media under your control.</p>
        </div>
      </div>
      <p class="diagram-footnote">Swap any layer‚Äôs implementation as long as it speaks the protocols. The foundation‚Äôs role is to publish those protocols and steward interoperable reference code.</p>
    </section>

    <section class="anonymization-section">
      <h2>Why Anonymization Matters</h2>
      <p><strong>Decentralization isn‚Äôt enough.</strong> We keep the core analysis from the original Cypherlots explainer because the lesson holds: if metadata leaks, influence follows.</p>
      <div class="anonymization-grid">
        <div class="anonymization-card">
          <h3>Decentralization alone</h3>
          <ul>
            <li>Your data may live on your server, but traffic patterns remain visible.</li>
            <li>Federated admins can still observe who talks to whom.</li>
            <li>Bulk data seizure enables retrospective decryption.</li>
            <li>IP correlation and timing attacks reveal identity.</li>
          </ul>
        </div>
        <div class="anonymization-card">
          <h3>Anonymization adds</h3>
          <ul>
            <li>Blind relays using OHTTP to hide metadata.</li>
            <li>Capability tokens so no global identity registry exists.</li>
            <li>Selective exfiltration and rate limits to resist bulk grabs.</li>
            <li>Forward secrecy that protects against post-quantum adversaries.</li>
          </ul>
        </div>
      </div>
      <p><a href="/whitepapers/why-decentralization-failed">Read the full analysis ‚Üí</a></p>
      <p><a href="/whitepapers">Download the whitepaper ‚Üí</a></p>
    </section>

    <section class="status-section">
      <h2>Current Status</h2>
      <div class="status-grid">
        <article class="status-card">
          <h3>Journal Vault</h3>
          <p>Status: <strong>Drafting</strong></p>
          <p>Reference implementation work-in-progress. Participating teams are validating storage graphs and capability semantics.</p>
        </article>
        <article class="status-card">
          <h3>Cypherlot</h3>
          <p>Status: <strong>Early alpha</strong></p>
          <p>Core protocol draft published for review. We are testing relay hardening and capability rotation strategies.</p>
        </article>
        <article class="status-card">
          <h3>Apps Layer</h3>
          <p>Status: <strong>Exploration</strong></p>
          <p>Open-source sample clients demonstrate messaging, media sharing, and AI prompts powered by the stack.</p>
        </article>
      </div>
    </section>

    <section class="get-started">
      <h2>Get Started</h2>
      <div class="role-grid">
        <article class="role-card">
          <h3>üõ†Ô∏è Developers</h3>
          <p>Implement clients, relays, or vault tooling.</p>
          <ul>
            <li>Review the specifications</li>
            <li>Experiment with the reference stack</li>
            <li>Join technical discussions</li>
          </ul>
          <p class="role-link"><a href="/docs">Start building ‚Üí</a></p>
        </article>
        <article class="role-card">
          <h3>üí∞ Funders &amp; Advisors</h3>
          <p>Support protocol development with transparent governance.</p>
          <ul>
            <li>Explore our funding roadmap</li>
            <li>Review financial dashboards</li>
            <li>Connect about research sponsorships</li>
          </ul>
          <p class="role-link"><a href="/governance#funding">Support the mission ‚Üí</a></p>
        </article>
        <article class="role-card">
          <h3>üìö Learners &amp; Advocates</h3>
          <p>Understand the societal stakes of metadata and surveillance.</p>
          <ul>
            <li>Study privacy fundamentals</li>
            <li>Share educational resources</li>
            <li>Host workshops and community sessions</li>
          </ul>
          <p class="role-link"><a href="/learn">Visit the learning center ‚Üí</a></p>
        </article>
      </div>
    </section>
  </div>
</BaseLayout>

<style>
  .stack-page {
    padding: var(--space-3xl) var(--space-md) var(--space-4xl);
    max-width: 960px;
    margin: 0 auto;
  }

  .stack-hero {
    text-align: center;
    margin-bottom: var(--space-2xl);
  }

  .stack-hero .lead {
    font-size: 1.375rem;
    color: var(--color-text-primary);
    margin-top: var(--space-sm);
  }

  .intro {
    color: var(--color-text-secondary);
    font-size: 1.05rem;
    margin: var(--space-lg) auto 0;
    max-width: 70ch;
  }

  .problem-section,
  .layers-section,
  .diagram-section,
  .anonymization-section,
  .status-section,
  .get-started {
    margin-top: var(--space-3xl);
  }

  .problem-section p {
    font-size: 1.05rem;
    line-height: 1.7;
    color: var(--color-text-secondary);
  }

  .layers-section h2 {
    text-align: center;
    margin-bottom: var(--space-xl);
  }

  .layer-card {
    display: grid;
    grid-template-columns: minmax(64px, auto) 1fr;
    gap: var(--space-lg);
    padding: var(--space-xl);
    background: var(--void-lighter);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border-subtle);
    margin-bottom: var(--space-lg);
  }

  .layer-icon {
    font-size: 2.5rem;
    display: grid;
    place-items: center;
  }

  .layer-card h3 {
    margin-bottom: var(--space-xs);
  }

  .layer-card ul {
    margin: var(--space-sm) 0;
    padding-left: var(--space-lg);
  }

  .callout {
    background: rgba(45, 125, 255, 0.1);
    border-left: 4px solid var(--color-accent-azure);
    padding: var(--space-sm);
    border-radius: var(--radius-md);
    margin: var(--space-md) 0;
  }

  .diagram {
    display: grid;
    gap: var(--space-md);
    margin-top: var(--space-xl);
  }

  .diagram-layer {
    background: rgba(45, 125, 255, 0.08);
    border: 1px solid rgba(45, 125, 255, 0.25);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
  }

  .diagram-footnote {
    color: var(--color-text-secondary);
    margin-top: var(--space-md);
    font-size: 0.95rem;
  }

  .anonymization-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: var(--space-lg);
    margin: var(--space-xl) 0;
  }

  .anonymization-card {
    background: var(--void-lighter);
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border-subtle);
    padding: var(--space-lg);
  }

  .anonymization-card ul {
    margin-left: var(--space-lg);
  }

  .status-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: var(--space-lg);
    margin-top: var(--space-xl);
  }

  .status-card {
    background: rgba(13, 210, 128, 0.08);
    border: 1px solid rgba(13, 210, 128, 0.4);
    border-radius: var(--radius-md);
    padding: var(--space-lg);
  }

  .get-started .role-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: var(--space-lg);
    margin-top: var(--space-xl);
  }

  .role-card {
    background: var(--void-lighter);
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border-subtle);
    padding: var(--space-lg);
  }

  .role-card ul {
    margin-left: var(--space-lg);
  }

  .layer-link,
  .role-link {
    margin-top: var(--space-md);
    font-weight: 600;
  }

  @media (max-width: 720px) {
    .layer-card {
      grid-template-columns: 1fr;
    }

    .layer-icon {
      justify-content: flex-start;
    }
  }
</style>
